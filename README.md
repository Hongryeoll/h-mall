# h-mall ğŸ›’

Next.js + Supabase ê¸°ë°˜ì˜ ì‡¼í•‘ëª° í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
ì¼ë°˜ ì‚¬ìš©ìì™€ ê´€ë¦¬ì(Admin)ì˜ ê¶Œí•œì„ êµ¬ë¶„í•˜ì—¬ ìƒí’ˆ íƒìƒ‰, ì¥ë°”êµ¬ë‹ˆ, ì£¼ë¬¸, ë¦¬ë·°, Q&A ê¸°ëŠ¥ë¶€í„° ê´€ë¦¬ì ì „ìš© ìƒí’ˆ ê´€ë¦¬, ì£¼ë¬¸ ê´€ë¦¬ ê¸°ëŠ¥ê¹Œì§€ ì œê³µí•©ë‹ˆë‹¤.

> **ë°°í¬:** [https://h-malltest.vercel.app](https://h-malltest.vercel.app)

---

## ğŸ“š í”„ë¡œì íŠ¸ ì†Œê°œ

- Next.js App Router ê¸°ë°˜ì˜ í’€ìŠ¤íƒ ì‡¼í•‘ëª°
- Supabaseë¥¼ í™œìš©í•œ ì¸ì¦, ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€, ì„œë²„ë¦¬ìŠ¤ API ì²˜ë¦¬
- React Query, React Hook Form ê¸°ë°˜ì˜ ìƒíƒœ ê´€ë¦¬ì™€ í¼ ì²˜ë¦¬
- ì¼ë°˜ ì‚¬ìš©ìì™€ ê´€ë¦¬ì(Admin) ê³„ì • êµ¬ë¶„ ë° ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ê¶Œí•œ ì²˜ë¦¬
- Vercelì„ í†µí•œ í”„ë¡ íŠ¸ + ë°±ì—”ë“œ í†µí•© í´ë¼ìš°ë“œ ë°°í¬

---

## ğŸ”¥ ê¸°ìˆ  ìŠ¤íƒ

### ğŸ–¥ï¸ Frontend

- **Next.js 15 (App Router)**
  - ì„œë²„ ì»´í¬ë„ŒíŠ¸, í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ í˜¼í•©
  - RSC + SSR + CSR ì•„í‚¤í…ì²˜
- **React 19**
- **TypeScript 5**
- **Tailwind CSS 3**
- **React Query (TanStack Query) v5**
  - ì„œë²„ ìƒíƒœ ë° ìºì‹±
- **React Hook Form**
  - í¼ ìƒíƒœ ë° ê²€ì¦

---

### ğŸ”— Backend / Infra

- **Supabase**
  - Database (PostgreSQL)
  - Auth (JWT + Session ê¸°ë°˜)
  - Storage (ì´ë¯¸ì§€ ë° íŒŒì¼ ì €ì¥)
  - Edge Functions (ì„œë²„ë¦¬ìŠ¤ API)
- **Vercel**
  - í”„ë¡ íŠ¸ì—”ë“œ + API + ì„œë²„ë¦¬ìŠ¤ ë°±ì—”ë“œ ë°°í¬

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥ (Features)

### ğŸ›ï¸ ì‚¬ìš©ì (User)

- ìƒí’ˆ ì¹´í…Œê³ ë¦¬ ë° ìƒì„¸ í˜ì´ì§€ íƒìƒ‰
- ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°, ìˆ˜ì •, ì‚­ì œ
- ì£¼ë¬¸ ìƒì„± ë° ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
- ìƒí’ˆ ë¦¬ë·° ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
- ìƒí’ˆ QnA ë“±ë¡/ìˆ˜ì •/ì‚­ì œ (ë¹„ë°€ê¸€ ì§€ì›)
- ë§ˆì´í˜ì´ì§€ì—ì„œ ê°œì¸ ì •ë³´ ë° ì£¼ë¬¸ ê´€ë¦¬

### ğŸ”§ ê´€ë¦¬ì (Admin)

- ìƒí’ˆ ëª©ë¡ ì¡°íšŒ, ë“±ë¡, ìˆ˜ì •, ì‚­ì œ
- ì¹´í…Œê³ ë¦¬ ë° ì„¹ì…˜ ê´€ë¦¬
- ì£¼ë¬¸ ë‚´ì—­ ê´€ë¦¬
- ë¦¬ë·° ë° QnA ê´€ë¦¬ (ë‹µë³€ ê°€ëŠ¥)

### ğŸ” ì¸ì¦ ë° ê¶Œí•œ

- Supabase ê¸°ë°˜ íšŒì›ê°€ì…/ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•œ ì ‘ê·¼ ì œì–´ (ê´€ë¦¬ì/ì¼ë°˜ ì‚¬ìš©ì êµ¬ë¶„)

### ğŸ“¦ ê¸°íƒ€

- ë°˜ì‘í˜• UI
- ì´ë¯¸ì§€ ìŠ¤í† ë¦¬ì§€ ì—°ë™ (Supabase Storage)
- ì„œë²„ ì•¡ì…˜(Server Actions) ê¸°ë°˜ API ì²˜ë¦¬
- React Query ê¸°ë°˜ ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë° ìºì‹±

## ğŸ“‚ í´ë” êµ¬ì¡° (Folder Structure)

```plaintext
src/
â”œâ”€â”€ actions/           # ì„œë²„ ì•¡ì…˜ (Server Actions)
â”‚   â”œâ”€â”€ auth/          # ì¸ì¦ ê´€ë ¨ ì•¡ì…˜
â”‚   â”œâ”€â”€ menu/          # ë©”ë‰´/ì¹´í…Œê³ ë¦¬ ê´€ë ¨ ì•¡ì…˜
â”‚   â””â”€â”€ product/       # ìƒí’ˆ ê´€ë ¨ ì•¡ì…˜
â”œâ”€â”€ app/               # Next.js App Router ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ (admin)/       # ê´€ë¦¬ì í˜ì´ì§€ ê·¸ë£¹
â”‚   â”œâ”€â”€ (login)/       # ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… í˜ì´ì§€ ê·¸ë£¹
â”‚   â”œâ”€â”€ (mall)/        # ì‚¬ìš©ììš© ì‡¼í•‘ëª° í˜ì´ì§€ ê·¸ë£¹
â”‚   â”œâ”€â”€ auth/          # ì¸ì¦ ì½œë°± ë° ì—ëŸ¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ layout.tsx     # ì „ì—­ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx       # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ not-found.tsx  # 404 ì²˜ë¦¬
â”œâ”€â”€ assets/            # ì•„ì´ì½˜, í°íŠ¸, ìŠ¤íƒ€ì¼ ë“± ì •ì  ìì‚°
â”œâ”€â”€ components/        # UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ data/              # í‚¤ì›Œë“œ ë°ì´í„°, ë©”ë‰´ ë°ì´í„°
â”œâ”€â”€ hooks/             # ì»¤ìŠ¤í…€ í›… (useCart, useOrder ë“±)
â”œâ”€â”€ library/           # Supabase í´ë¼ì´ì–¸íŠ¸ ë° ìœ í‹¸
â”œâ”€â”€ types/             # ì „ì—­ íƒ€ì… ì •ì˜
â”œâ”€â”€ middleware.ts      # ì¸ì¦ ë° ê¶Œí•œ ë¯¸ë“¤ì›¨ì–´
```

## ğŸ” ë¯¸ë“¤ì›¨ì–´ ì¸ì¦ ë° ê¶Œí•œ ì²˜ë¦¬

### âœ… ê²½ë¡œ ì ‘ê·¼ ê·œì¹™

| ê²½ë¡œ                    | ê¶Œí•œ                            |
| ----------------------- | ------------------------------- |
| `/admin/**`             | **ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥**          |
| `/order/**`, `/cart/**` | **ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥** |
| `/mypage/**`            | **ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥** |
| `/checkout/**`          | **ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥** |

### âœ… ë™ì‘ ë°©ì‹

- Supabase ì„¸ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ JWT í™•ì¸
- ë¯¸ë“¤ì›¨ì–´ì—ì„œ ë¡œê·¸ì¸ ìƒíƒœ ë° ê´€ë¦¬ì ê¶Œí•œ íŒë³„
- ê¶Œí•œ ë¯¸ì¶©ì¡± ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ ë˜ëŠ” ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ğŸ”¸ ì£¼ìš” í…Œì´ë¸”

| í…Œì´ë¸”ëª…      | ì„¤ëª…                             |
| ------------- | -------------------------------- |
| `users`       | ì‚¬ìš©ì ì •ë³´ (Supabase Auth ì—°ë™) |
| `products`    | ìƒí’ˆ ì •ë³´                        |
| `categories`  | ì¹´í…Œê³ ë¦¬ ì •ë³´                    |
| `sections`    | ì¤‘ê°„ ì¹´í…Œê³ ë¦¬                    |
| `subsections` | ì„¸ë¶€ ì¹´í…Œê³ ë¦¬                    |
| `subtabs`     | ì„¸ë¶€ íƒ­                          |
| `cart_items`  | ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ                  |
| `orders`      | ì£¼ë¬¸ ì •ë³´                        |
| `order_items` | ì£¼ë¬¸ ìƒì„¸                        |
| `reviews`     | ìƒí’ˆ ë¦¬ë·°                        |
| `qna`         | ìƒí’ˆ QnA                         |

## ğŸ—ºï¸ H-Mall Database ERD

![Database ERD](./public/ERD-image.png)

---

## ğŸ—„ï¸ Tables

### ğŸ›ï¸ `products`

| Column      | Type      | Description         |
| ----------- | --------- | ------------------- |
| id          | uuid      | PK. Product ID      |
| name        | text      | Product name        |
| description | text      | Product description |
| price       | numeric   | Base price          |
| category_id | uuid      | FK. categories.id   |
| section_id  | uuid      | FK. sections.id     |
| subtab_id   | uuid      | FK. subtabs.id      |
| created_at  | timestamp | Created date        |

---

### ğŸ—‚ï¸ `categories`

| Column | Type | Description          |
| ------ | ---- | -------------------- |
| id     | uuid | PK. Category ID      |
| code   | text | Unique category code |
| name   | text | Category name        |

### ğŸ—‚ï¸ `sections`

| Column      | Type | Description       |
| ----------- | ---- | ----------------- |
| id          | uuid | PK. Section ID    |
| category_id | uuid | FK. categories.id |
| name        | text | Section name      |

### ğŸ—‚ï¸ `subtabs`

| Column     | Type | Description     |
| ---------- | ---- | --------------- |
| id         | uuid | PK. Subtab ID   |
| section_id | uuid | FK. sections.id |
| name       | text | Subtab name     |

---

### ğŸ›’ `cart_items`

| Column     | Type      | Description      |
| ---------- | --------- | ---------------- |
| id         | uuid      | PK. Cart item ID |
| user_id    | uuid      | FK. userinfo.id  |
| product_id | uuid      | FK. products.id  |
| quantity   | int       | Quantity         |
| created_at | timestamp | Created date     |

---

### ğŸ§¾ `orders`

| Column       | Type      | Description           |
| ------------ | --------- | --------------------- |
| id           | uuid      | PK. Order ID          |
| user_id      | uuid      | FK. userinfo.id       |
| total_amount | numeric   | Total order amount    |
| status       | text      | Order status          |
| receiver     | text      | Receiver name         |
| phone        | text      | Receiver phone number |
| address      | text      | Receiver address      |
| created_at   | timestamp | Order date            |

### ğŸ“¦ `order_items`

| Column     | Type    | Description                  |
| ---------- | ------- | ---------------------------- |
| id         | uuid    | PK. Order item ID            |
| order_id   | uuid    | FK. orders.id                |
| product_id | uuid    | FK. products.id              |
| quantity   | int     | Quantity                     |
| unit_price | numeric | Price per unit at order time |

---

### â­ `reviews`

| Column     | Type      | Description         |
| ---------- | --------- | ------------------- |
| id         | uuid      | PK. Review ID       |
| user_id    | uuid      | FK. userinfo.id     |
| product_id | uuid      | FK. products.id     |
| rating     | int       | Rating (1-5)        |
| content    | text      | Review content      |
| images     | text[]    | Array of image URLs |
| created_at | timestamp | Created date        |

---

### â“ `qnas`

| Column     | Type      | Description             |
| ---------- | --------- | ----------------------- |
| id         | uuid      | PK. QnA ID              |
| user_id    | uuid      | FK. userinfo.id         |
| product_id | uuid      | FK. products.id         |
| question   | text      | QnA question            |
| answer     | text      | QnA answer              |
| is_private | boolean   | Private question toggle |
| created_at | timestamp | Created date            |

---

### ğŸ‘¤ `userinfo`

| Column     | Type      | Description  |
| ---------- | --------- | ------------ |
| id         | uuid      | PK. User ID  |
| email      | text      | User email   |
| name       | text      | User name    |
| phone      | text      | User phone   |
| created_at | timestamp | Created date |

---

## ğŸ” Views

- ğŸ” **`products_with_review`**
  â†’ ìƒí’ˆ ì •ë³´ + í‰ê·  ë³„ì  + ë¦¬ë·° ìˆ˜ í¬í•¨

- ğŸ” **`qna_with_user_info`**
  â†’ QnA ì •ë³´ + ì‚¬ìš©ì ì •ë³´ í¬í•¨

- ğŸ” **`reviews_with_userinfo`**
  â†’ ë¦¬ë·° + ì‘ì„±ì ì´ë¦„ ë° ì´ë©”ì¼ í¬í•¨

---

## ğŸš¦ Row Level Security (RLS) Policy

| Table       | Public | Logged-In User | Admin |
| ----------- | ------ | -------------- | ----- |
| products    | âœ…     | âœ…             | âœ…    |
| categories  | âœ…     | âœ…             | âœ…    |
| sections    | âœ…     | âœ…             | âœ…    |
| subtabs     | âœ…     | âœ…             | âœ…    |
| cart_items  | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |
| orders      | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |
| order_items | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |
| reviews     | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |
| qnas        | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |
| userinfo    | âŒ     | âœ… (ë³¸ì¸ë§Œ)    | âœ…    |

---
